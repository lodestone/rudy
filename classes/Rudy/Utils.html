<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Rudy::Utils [Rudy: Not your grandparents' EC2 deployment tool.]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          Rudy::Utils
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/rudy/utils_rb.html">lib/rudy/utils.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            A motley collection of methods that <a href="../Rudy.html">Rudy</a> loves
            to call!
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000496">banner</a></li>
              <li><a href="#M000489">bell</a></li>
              <li><a href="#M000490">bug</a></li>
              <li><a href="#M000499">capture</a></li>
              <li><a href="#M000485">external_ip_address</a></li>
              <li><a href="#M000487">generate_tag</a></li>
              <li><a href="#M000492">id_type</a></li>
              <li><a href="#M000494">identifier</a></li>
              <li><a href="#M000486">internal_ip_address</a></li>
              <li><a href="#M000491">is_id?</a></li>
              <li><a href="#M000493">known_type?</a></li>
              <li><a href="#M000495">noid</a></li>
              <li><a href="#M000497">require_glob</a></li>
              <li><a href="#M000498">service_available?</a></li>
              <li><a href="#M000501">strand</a></li>
              <li><a href="#M000488">waiter</a></li>
              <li><a href="#M000502">without_indent</a></li>
              <li><a href="#M000500">write_to_file</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>Socket::Constants</li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='class-list'>
              <h2>Classes and Modules</h2>
              Module <a href="Utils/RSSReader.html" class="link">Rudy::Utils::RSSReader</a><br />
            </div>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000496'>
                <a name='M000496'>      </a>
                <div class='synopsis'>
                  <span class='name'>banner</span>
                  <span class='arguments'>(msg, size = :normal, colour = :black)</span>
                </div>
                <div class='description'>
                  <p>
                  <tt>msg</tt> The message to return as a banner <tt>size</tt> One of:
                  :normal (default), :huge <tt>colour</tt> a valid Returns a string with
                  styling applying
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000496-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000496-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 158</span>&#x000A;158:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">banner</span>(<span class="ruby-identifier">msg</span>, <span class="ruby-identifier">size</span> = <span class="ruby-identifier">:normal</span>, <span class="ruby-identifier">colour</span> = <span class="ruby-identifier">:black</span>)&#x000A;159:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">msg</span>&#x000A;160:       <span class="ruby-identifier">banners</span> = {&#x000A;161:         <span class="ruby-identifier">:huge</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">without_indent</span>(<span class="ruby-value str">%Q(&#x000A;162:         =======================================================&#x000A;163:         =======================================================&#x000A;164:         !!!!!!!!!   %s   !!!!!!!!!&#x000A;165:         =======================================================&#x000A;166:         =======================================================)</span>),&#x000A;167:         <span class="ruby-identifier">:normal</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">%Q(============  %s  ============)</span>&#x000A;168:       }&#x000A;169:       <span class="ruby-identifier">size</span> = <span class="ruby-identifier">:normal</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">banners</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">size</span>)&#x000A;170:       <span class="ruby-comment cmt">#colour = :black unless Drydock::Console.valid_colour?(colour)</span>&#x000A;171:       <span class="ruby-identifier">size</span>, <span class="ruby-identifier">colour</span> = <span class="ruby-identifier">size</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-identifier">colour</span>.<span class="ruby-identifier">to_sym</span>&#x000A;172:       <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">banners</span>[<span class="ruby-identifier">size</span>], <span class="ruby-identifier">msg</span>).<span class="ruby-identifier">bright</span>.<span class="ruby-identifier">att</span>(<span class="ruby-identifier">:reverse</span>)&#x000A;173:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000489'>
                <a name='M000489'>      </a>
                <div class='synopsis'>
                  <span class='name'>bell</span>
                  <span class='arguments'>(chimes=1, logger=nil)</span>
                </div>
                <div class='description'>
                  <p>
                  Make a terminal bell chime
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000489-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000489-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 98</span>&#x000A; 98:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bell</span>(<span class="ruby-identifier">chimes</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">logger</span>=<span class="ruby-keyword kw">nil</span>)&#x000A; 99:       <span class="ruby-identifier">chimes</span> <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>&#x000A;100:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">logger</span>&#x000A;101:       <span class="ruby-identifier">chimed</span> = <span class="ruby-identifier">chimes</span>.<span class="ruby-identifier">to_i</span>&#x000A;102:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\a&quot;</span><span class="ruby-operator">*</span><span class="ruby-identifier">chimes</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">chimes</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>&#x000A;103:       <span class="ruby-keyword kw">true</span> <span class="ruby-comment cmt"># be like Rudy.bug()</span>&#x000A;104:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000490'>
                <a name='M000490'>      </a>
                <div class='synopsis'>
                  <span class='name'>bug</span>
                  <span class='arguments'>(bugid, logger=STDERR)</span>
                </div>
                <div class='description'>
                  <p>
                  Have you seen that episode of The Cosby Show where Dizzy Gillespie&#8230;
                  ah nevermind.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000490-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000490-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 107</span>&#x000A;107:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bug</span>(<span class="ruby-identifier">bugid</span>, <span class="ruby-identifier">logger</span>=<span class="ruby-constant">STDERR</span>)&#x000A;108:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;You have found a bug! If you want, you can email&quot;</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>)&#x000A;109:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">'rudy@solutious.com'</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>).<span class="ruby-identifier">bright</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; about it. It's bug ##{bugid}.&quot;</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>)          &#x000A;110:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Continuing...&quot;</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>)&#x000A;111:       <span class="ruby-keyword kw">true</span> <span class="ruby-comment cmt"># so we can string it together like: bug('1') &amp;&amp; next if ...</span>&#x000A;112:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000499'>
                <a name='M000499'>      </a>
                <div class='synopsis'>
                  <span class='name'>capture</span>
                  <span class='arguments'>(stream) {|| ...}</span>
                </div>
                <div class='description'>
                  <p>
                  Capture STDOUT or STDERR to prevent it from being printed.
                  </p>
                  <pre>capture(:stdout) do&#x000A;  ...&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000499-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000499-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 236</span>&#x000A;236:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">capture</span>(<span class="ruby-identifier">stream</span>)&#x000A;237:       <span class="ruby-comment cmt">#raise &quot;We can only capture STDOUT or STDERR&quot; unless stream == :stdout || stream == :stderr</span>&#x000A;238:       <span class="ruby-keyword kw">begin</span>&#x000A;239:         <span class="ruby-identifier">stream</span> = <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">to_s</span>&#x000A;240:         <span class="ruby-identifier">eval</span> <span class="ruby-node">&quot;$#{stream} = StringIO.new&quot;</span>&#x000A;241:         <span class="ruby-keyword kw">yield</span>&#x000A;242:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;$#{stream}&quot;</span>).<span class="ruby-identifier">read</span>&#x000A;243:       <span class="ruby-keyword kw">ensure</span>&#x000A;244:         <span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;$#{stream} = #{stream.upcase}&quot;</span>)&#x000A;245:       <span class="ruby-keyword kw">end</span>&#x000A;246: &#x000A;247:       <span class="ruby-identifier">result</span>&#x000A;248:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000485'>
                <a name='M000485'>      </a>
                <div class='synopsis'>
                  <span class='name'>external_ip_address</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the external IP address (the one seen by the internet)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000485-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000485-source'>    <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 17</span>&#x000A;17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">external_ip_address</span>&#x000A;18:       <span class="ruby-identifier">ip</span> = <span class="ruby-keyword kw">nil</span>&#x000A;19:       <span class="ruby-keyword kw">begin</span>&#x000A;20:         <span class="ruby-node">%w{solutious.heroku.com/ip}</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sponge</span><span class="ruby-operator">|</span>&#x000A;21:           <span class="ruby-identifier">ipstr</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span>.<span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-node">&quot;http://#{sponge}&quot;</span>)) <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>&#x000A;22:           <span class="ruby-identifier">ip</span> = <span class="ruby-regexp re">/([0-9]{1,3}\.){3}[0-9]{1,3}/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">ipstr</span>).<span class="ruby-identifier">to_s</span>&#x000A;23:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ip</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ip</span>.<span class="ruby-identifier">empty?</span>&#x000A;24:         <span class="ruby-keyword kw">end</span>&#x000A;25:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SocketError</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ETIMEDOUT</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;26:         <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">Huxtable</span>.<span class="ruby-identifier">le</span> <span class="ruby-value str">&quot;Connection Error. Check your internets!&quot;</span>&#x000A;27:       <span class="ruby-keyword kw">end</span>&#x000A;28:       <span class="ruby-identifier">ip</span>&#x000A;29:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000487'>
                <a name='M000487'>      </a>
                <div class='synopsis'>
                  <span class='name'>generate_tag</span>
                  <span class='arguments'>(suffix=nil)</span>
                </div>
                <div class='description'>
                  <p>
                  Generates a canonical tag name in the form:
                  </p>
                  <pre>2009-12-31-USER-SUFFIX</pre>
                  <p>
                  where USER is equal to the user executing the <a
                  href="../Rudy.html">Rudy</a> process and SUFFIX is equal to <tt>suffix</tt>
                  (optional)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000487-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000487-source'>    <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 47</span>&#x000A;47:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_tag</span>(<span class="ruby-identifier">suffix</span>=<span class="ruby-keyword kw">nil</span>)&#x000A;48:       <span class="ruby-identifier">n</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">now</span>&#x000A;49:       <span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span> = <span class="ruby-identifier">n</span>.<span class="ruby-identifier">year</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">&quot;20&quot;</span>), <span class="ruby-identifier">n</span>.<span class="ruby-identifier">month</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">&quot;0&quot;</span>)&#x000A;50:       <span class="ruby-identifier">d</span>, <span class="ruby-identifier">u</span> = <span class="ruby-identifier">n</span>.<span class="ruby-identifier">mday</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">&quot;0&quot;</span>), <span class="ruby-constant">Rudy</span>.<span class="ruby-identifier">sysinfo</span>.<span class="ruby-identifier">user</span>&#x000A;51:       <span class="ruby-identifier">criteria</span> = [<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">u</span>]&#x000A;52:       <span class="ruby-identifier">criteria</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">suffix</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">suffix</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">suffix</span>.<span class="ruby-identifier">empty?</span>&#x000A;53:       <span class="ruby-identifier">criteria</span>.<span class="ruby-identifier">join</span> <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">DELIM</span> &#x000A;54:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000492'>
                <a name='M000492'>      </a>
                <div class='synopsis'>
                  <span class='name'>id_type</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the object type associated to <tt>str</tt> or nil if unknown.
                  </p>
                  <ul>
                  <li><tt>str</tt> is a string you&#8217;re investigating
                  
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000492-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000492-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 126</span>&#x000A;126:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id_type</span>(<span class="ruby-identifier">str</span>)&#x000A;127:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">str</span>&#x000A;128:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>&#x000A;129:       (<span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'-'</span>).<span class="ruby-identifier">first</span> } <span class="ruby-operator">||</span> []).<span class="ruby-identifier">first</span>&#x000A;130:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000494'>
                <a name='M000494'>      </a>
                <div class='synopsis'>
                  <span class='name'>identifier</span>
                  <span class='arguments'>(key)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the string identifier associated to this <tt>key</tt>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000494-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000494-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 140</span>&#x000A;140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identifier</span>(<span class="ruby-identifier">key</span>)&#x000A;141:       <span class="ruby-identifier">key</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_sym</span>&#x000A;142:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)&#x000A;143:       <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>[<span class="ruby-identifier">key</span>]&#x000A;144:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000486'>
                <a name='M000486'>      </a>
                <div class='synopsis'>
                  <span class='name'>internal_ip_address</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the local IP address which receives external traffic from: <a
                  href="http://coderrr.wordpress.com/2008/05/28/get-your-local-ip-address">coderrr.wordpress.com/2008/05/28/get-your-local-ip-address</a>/
                  NOTE: This <em>does not</em> open a connection to the IP address.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000486-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000486-source'>    <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 34</span>&#x000A;34:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">internal_ip_address</span>&#x000A;35:       <span class="ruby-comment cmt"># turn off reverse DNS resolution temporarily </span>&#x000A;36:       <span class="ruby-identifier">orig</span>, <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span>, <span class="ruby-keyword kw">true</span>   &#x000A;37:       <span class="ruby-identifier">ip</span> = <span class="ruby-constant">UDPSocket</span>.<span class="ruby-identifier">open</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-value str">'75.101.137.7'</span>, <span class="ruby-value">1</span>); <span class="ruby-identifier">s</span>.<span class="ruby-identifier">addr</span>.<span class="ruby-identifier">last</span> } <span class="ruby-comment cmt"># Solutious IP</span>&#x000A;38:       <span class="ruby-identifier">ip</span>&#x000A;39:     <span class="ruby-keyword kw">ensure</span>  &#x000A;40:       <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-identifier">orig</span>&#x000A;41:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000491'>
                <a name='M000491'>      </a>
                <div class='synopsis'>
                  <span class='name'>is_id?</span>
                  <span class='arguments'>(identifier, str)</span>
                </div>
                <div class='description'>
                  <p>
                  Is the given string <tt>str</tt> an ID of type <tt>identifier</tt>?
                  </p>
                  <ul>
                  <li><tt>identifier</tt> is expected to be a key from ID_MAP
                  
                  </li>
                  <li><tt>str</tt> is a string you&#8217;re investigating
                  
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000491-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000491-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 117</span>&#x000A;117:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_id?</span>(<span class="ruby-identifier">identifier</span>, <span class="ruby-identifier">str</span>)&#x000A;118:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">identifier</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">known_type?</span>(<span class="ruby-identifier">identifier</span>)&#x000A;119:       <span class="ruby-identifier">identifier</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">to_sym</span>&#x000A;120:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>&#x000A;121:       <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'-'</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>[<span class="ruby-identifier">identifier</span>].<span class="ruby-identifier">to_s</span>&#x000A;122:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000493'>
                <a name='M000493'>      </a>
                <div class='synopsis'>
                  <span class='name'>known_type?</span>
                  <span class='arguments'>(key)</span>
                </div>
                <div class='description'>
                  <p>
                  Is the given <tt>key</tt> a known type of object?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000493-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000493-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 133</span>&#x000A;133:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">known_type?</span>(<span class="ruby-identifier">key</span>)&#x000A;134:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">key</span>&#x000A;135:       <span class="ruby-identifier">key</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_sym</span>&#x000A;136:       <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)&#x000A;137:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000495'>
                <a name='M000495'>      </a>
                <div class='synopsis'>
                  <span class='name'>noid</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='description'>
                  <p>
                  Return a string ID without the identifier. e.g. key-stage-app-root =>
                  stage-app-root
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000495-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000495-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 147</span>&#x000A;147:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">noid</span>(<span class="ruby-identifier">str</span>)&#x000A;148:       <span class="ruby-identifier">el</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'-'</span>)&#x000A;149:       <span class="ruby-identifier">el</span>.<span class="ruby-identifier">shift</span>&#x000A;150:       <span class="ruby-identifier">el</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'-'</span>)&#x000A;151:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000497'>
                <a name='M000497'>      </a>
                <div class='synopsis'>
                  <span class='name'>require_glob</span>
                  <span class='arguments'>(*path)</span>
                </div>
                <div class='description'>
                  <p>
                  <tt>require</tt> a glob of files.
                  </p>
                  <ul>
                  <li><tt>path</tt> is a list of path elements which is sent to File.join
                  
                  </li>
                  </ul>
                  <p>
                  and then to Dir.glob. The list of files found are sent to require. Nothing
                  is returned but LoadError exceptions are caught. The message is printed to
                  STDERR and the program exits with 7.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000497-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000497-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 181</span>&#x000A;181:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_glob</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">path</span>)&#x000A;182:       <span class="ruby-keyword kw">begin</span>&#x000A;183:         <span class="ruby-comment cmt"># TODO: Use autoload</span>&#x000A;184:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">path</span>.<span class="ruby-identifier">flatten</span>)).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>&#x000A;185:           <span class="ruby-identifier">require</span> <span class="ruby-identifier">path</span>&#x000A;186:         <span class="ruby-keyword kw">end</span>&#x000A;187:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;188:         <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Error: #{ex.message}&quot;</span>&#x000A;189:         <span class="ruby-identifier">exit</span> <span class="ruby-value">7</span>&#x000A;190:       <span class="ruby-keyword kw">end</span>&#x000A;191:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000498'>
                <a name='M000498'>      </a>
                <div class='synopsis'>
                  <span class='name'>service_available?</span>
                  <span class='arguments'>(host, port, wait=3)</span>
                </div>
                <div class='description'>
                  <p>
                  Checks whether something is listening to a socket.
                  </p>
                  <ul>
                  <li><tt>host</tt> A hostname
                  
                  </li>
                  <li><tt>port</tt> The port to check
                  
                  </li>
                  <li><tt>wait</tt> The number of seconds to wait for before timing out.
                  
                  </li>
                  </ul>
                  <p>
                  Returns true if <tt>host</tt> allows a socket connection on <tt>port</tt>.
                  Returns false if one of the following exceptions is raised:
                  Errno::EAFNOSUPPORT, Errno::ECONNREFUSED, SocketError, Timeout::Error
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000498-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000498-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 202</span>&#x000A;202:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">service_available?</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, <span class="ruby-identifier">wait</span>=<span class="ruby-value">3</span>)&#x000A;203:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Rudy</span>.<span class="ruby-identifier">sysinfo</span>.<span class="ruby-identifier">vm</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:java</span>&#x000A;204:         <span class="ruby-keyword kw">begin</span>&#x000A;205:           <span class="ruby-identifier">iadd</span> = <span class="ruby-constant">Java</span><span class="ruby-operator">::</span><span class="ruby-constant">InetSocketAddress</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>      &#x000A;206:           <span class="ruby-identifier">socket</span> = <span class="ruby-constant">Java</span><span class="ruby-operator">::</span><span class="ruby-constant">Socket</span>.<span class="ruby-identifier">new</span>&#x000A;207:           <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">connect</span> <span class="ruby-identifier">iadd</span>, <span class="ruby-identifier">wait</span> <span class="ruby-operator">*</span> <span class="ruby-value">1000</span>  <span class="ruby-comment cmt"># milliseconds</span>&#x000A;208:           <span class="ruby-identifier">success</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">socket</span>.<span class="ruby-identifier">isClosed</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">isConnected</span>&#x000A;209:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NativeException</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;210:           <span class="ruby-identifier">puts</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">backtrace</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Rudy</span>.<span class="ruby-identifier">debug?</span>&#x000A;211:           <span class="ruby-keyword kw">false</span>&#x000A;212:         <span class="ruby-keyword kw">end</span>&#x000A;213:       <span class="ruby-keyword kw">else</span> &#x000A;214:         <span class="ruby-keyword kw">begin</span>&#x000A;215:           <span class="ruby-identifier">status</span> = <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-identifier">timeout</span>(<span class="ruby-identifier">wait</span>) <span class="ruby-keyword kw">do</span>&#x000A;216:             <span class="ruby-identifier">socket</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">AF_INET</span>, <span class="ruby-constant">SOCK_STREAM</span>, <span class="ruby-value">0</span> )&#x000A;217:             <span class="ruby-identifier">sockaddr</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">pack_sockaddr_in</span>( <span class="ruby-identifier">port</span>, <span class="ruby-identifier">host</span> )&#x000A;218:             <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">connect</span>( <span class="ruby-identifier">sockaddr</span> )&#x000A;219:           <span class="ruby-keyword kw">end</span>&#x000A;220:           <span class="ruby-keyword kw">true</span>&#x000A;221:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EAFNOSUPPORT</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ECONNREFUSED</span>, <span class="ruby-constant">SocketError</span>, <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;222:           <span class="ruby-identifier">puts</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">class</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">backtrace</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Rudy</span>.<span class="ruby-identifier">debug?</span>&#x000A;223:           <span class="ruby-keyword kw">false</span>&#x000A;224:         <span class="ruby-keyword kw">end</span>&#x000A;225:       <span class="ruby-keyword kw">end</span>&#x000A;226:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000501'>
                <a name='M000501'>      </a>
                <div class='synopsis'>
                  <span class='name'>strand</span>
                  <span class='arguments'>( len=8, safe=true )</span>
                </div>
                <div class='description'>
                  <p>
                  Generates a string of random alphanumeric characters.
                  </p>
                  <ul>
                  <li><tt>len</tt> is the length, an Integer. Default: 8
                  
                  </li>
                  <li><tt>safe</tt> in safe-mode, ambiguous characters are removed (default:
                  true):
                  
                  <pre>i l o 1 0</pre>
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000501-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000501-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 266</span>&#x000A;266:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strand</span>( <span class="ruby-identifier">len</span>=<span class="ruby-value">8</span>, <span class="ruby-identifier">safe</span>=<span class="ruby-keyword kw">true</span> )&#x000A;267:        <span class="ruby-identifier">chars</span> = (<span class="ruby-value str">&quot;a&quot;</span><span class="ruby-operator">..</span><span class="ruby-value str">&quot;z&quot;</span>).<span class="ruby-identifier">to_a</span> <span class="ruby-operator">+</span> (<span class="ruby-value str">&quot;0&quot;</span><span class="ruby-operator">..</span><span class="ruby-value str">&quot;9&quot;</span>).<span class="ruby-identifier">to_a</span>&#x000A;268:        <span class="ruby-identifier">chars</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-node">%w(i l o 1 0)</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">v</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">safe</span>&#x000A;269:        <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;270:        <span class="ruby-value">1</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-identifier">len</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">chars</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">chars</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)] }&#x000A;271:        <span class="ruby-identifier">str</span>&#x000A;272:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000488'>
                <a name='M000488'>      </a>
                <div class='synopsis'>
                  <span class='name'>waiter</span>
                  <span class='arguments'>(duration=2, max=240, logger=STDOUT, msg=nil, bells=0, &amp;check)</span>
                </div>
                <div class='description'>
                  <p>
                  Wait for something to happen.
                  </p>
                  <ul>
                  <li><tt>duration</tt> seconds to wait between tries (default: 2).
                  
                  </li>
                  <li><tt>max</tt> maximum time to wait (default: 240). Throws an exception when
                  exceeded.
                  
                  </li>
                  <li><tt>logger</tt> IO object to print <tt>dot</tt> to.
                  
                  </li>
                  <li><tt>msg</tt> the message to print before executing the block.
                  
                  </li>
                  <li><tt>bells</tt> number of terminal bells to ring. Set to nil or false to
                  keep the waiter silent
                  
                  </li>
                  </ul>
                  <p>
                  The <tt>check</tt> block must return false while waiting. Once it returns
                  true the waiter will return true too.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000488-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000488-source'>    <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 65</span>&#x000A;65:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">waiter</span>(<span class="ruby-identifier">duration</span>=<span class="ruby-value">2</span>, <span class="ruby-identifier">max</span>=<span class="ruby-value">240</span>, <span class="ruby-identifier">logger</span>=<span class="ruby-constant">STDOUT</span>, <span class="ruby-identifier">msg</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">bells</span>=<span class="ruby-value">0</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">check</span>)&#x000A;66:       <span class="ruby-comment cmt"># TODO: Move to Drydock. [ed-why?]</span>&#x000A;67:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;The waiter needs a block!&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">check</span>&#x000A;68:       <span class="ruby-identifier">duration</span> = <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">duration</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>&#x000A;69:       <span class="ruby-identifier">max</span> = <span class="ruby-identifier">duration</span><span class="ruby-operator">*</span><span class="ruby-value">2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">max</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">duration</span>&#x000A;70:       <span class="ruby-identifier">dot</span> = <span class="ruby-value str">'.'</span>&#x000A;71:       <span class="ruby-keyword kw">begin</span>&#x000A;72:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">msg</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>&#x000A;73:           <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">msg</span> &#x000A;74:           <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">flush</span>&#x000A;75:         <span class="ruby-keyword kw">end</span>&#x000A;76:         <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-identifier">timeout</span>(<span class="ruby-identifier">max</span>) <span class="ruby-keyword kw">do</span>&#x000A;77:           <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-identifier">check</span>.<span class="ruby-identifier">call</span>&#x000A;78:             <span class="ruby-identifier">sleep</span> <span class="ruby-identifier">duration</span>&#x000A;79:             <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:print</span>)&#x000A;80:             <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">flush</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:flush</span>)&#x000A;81:           <span class="ruby-keyword kw">end</span>&#x000A;82:         <span class="ruby-keyword kw">end</span>&#x000A;83:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;84:         <span class="ruby-keyword kw">retry</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Annoy</span>.<span class="ruby-identifier">pose_question</span>(<span class="ruby-value str">&quot; Keep waiting?\a &quot;</span>, <span class="ruby-regexp re">/yes|y|ya|sure|you bet!/i</span>, <span class="ruby-identifier">logger</span>)&#x000A;85:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>&#x000A;86:       <span class="ruby-keyword kw">end</span>&#x000A;87:       &#x000A;88:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">msg</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>&#x000A;89:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span>&#x000A;90:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">flush</span>&#x000A;91:       <span class="ruby-keyword kw">end</span>&#x000A;92:       &#x000A;93:       <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">bell</span>(<span class="ruby-identifier">bells</span>, <span class="ruby-identifier">logger</span>)&#x000A;94:       <span class="ruby-keyword kw">true</span>&#x000A;95:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000502'>
                <a name='M000502'>      </a>
                <div class='synopsis'>
                  <span class='name'>without_indent</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns <tt>str</tt> with the leading indentation removed. Stolen from <a
                  href="http://github.com/mynyml/unindent/">github.com/mynyml/unindent/</a>
                  because it was better.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000502-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000502-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 276</span>&#x000A;276:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">without_indent</span>(<span class="ruby-identifier">str</span>)&#x000A;277:       <span class="ruby-identifier">indent</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">$/</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> }.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp re">/[^\s]/</span>) }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">min</span>&#x000A;278:       <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/^[[:blank:]]{#{indent}}/</span>, <span class="ruby-value str">''</span>)&#x000A;279:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000500'>
                <a name='M000500'>      </a>
                <div class='synopsis'>
                  <span class='name'>write_to_file</span>
                  <span class='arguments'>(filename, content, mode, chmod=600)</span>
                </div>
                <div class='description'>
                  <p>
                  A basic file writer
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000500-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000500-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 251</span>&#x000A;251:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write_to_file</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">chmod</span>=<span class="ruby-value">600</span>)&#x000A;252:       <span class="ruby-identifier">mode</span> = (<span class="ruby-identifier">mode</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:append</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">'a'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'w'</span>&#x000A;253:       <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">mode</span>)&#x000A;254:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">content</span>&#x000A;255:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>&#x000A;256:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Rudy</span>.<span class="ruby-identifier">sysinfo</span>.<span class="ruby-identifier">os</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:unix</span>&#x000A;257:       <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Provided chmod is not a Fixnum (#{chmod})&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">chmod</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fixnum</span>)&#x000A;258:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">chmod</span>, <span class="ruby-identifier">filename</span>)&#x000A;259:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
